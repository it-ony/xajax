!function(a,b){a.XAJAX=a.XAJAX||{};var c={},d=function(c,d){function e(a){if(0===c.indexOf(a.origin))if("initialized"===a.data){if(k)return;m&&clearTimeout(m),k=!0,l=!0,d&&d(null,h);for(var b=0;b<j.length;b++){var e=j[b];h.ajax(e.url,e.options,e.callback)}j=[]}else if(k){var f=JSON.parse(a.data),g=f.messageId,i=p[g];i&&i.callback&&i.callback(f.error,f.data),delete p[g]}}function f(){n=b.createElement("iframe"),n.onload=function(){k||(m=setTimeout(function(){k=!0,d(new Error("Initialisation failed"),h)},i))},n.src=c,n.style.visibility="hidden",n.style.display="none";var a=b.body||b.getElementsByTagName("body")[0];a.appendChild(n)}function g(a,b,d){o++;var e={type:a,data:b,messageId:o};p[o]={message:e,callback:d},n.contentWindow.postMessage(JSON.stringify(e),c)}var h,i=1e3,j=[],k=!1,l=!1,m=null,n=null,o=0,p={};return a.addEventListener?addEventListener("message",e,!1):attachEvent("onmessage",e),f(),h={ajax:function(a,b,c){k?l?g("ajax",{url:a,options:b},c):c&&c(new Error("Cannot communicate with iFrame")):j.push({url:a,options:b,callback:c})}}};XAJAX.create=function(a,b){var e;if(c.hasOwnProperty(a)){var f=c[a];f.initialized?b&&b(f.initializedError):f.callbacks.push(b),e=f.instance}else e=new d(a,function(b){var d=c[a];d.initialized=!0,d.initializedError=b;for(var e=d.callbacks,f=0;f<e.length;f++)e[f]&&e[f](b)}),c[a]={callbacks:[b],initialized:!1,initializedError:null,instance:e};return e}}(window,document);